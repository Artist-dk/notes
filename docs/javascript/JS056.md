# ðŸš€ **Database Connectivity in Node.js**  
Connecting a database to Node.js is essential for storing and retrieving data dynamically. The three most popular databases used with Node.js are:  

1ï¸âƒ£ **MongoDB** - NoSQL database for flexible and scalable storage.  
2ï¸âƒ£ **PostgreSQL** - Relational database with strong ACID compliance.  
3ï¸âƒ£ **MySQL** - Widely-used relational database for structured data.  

---

# ðŸ“Œ **1ï¸âƒ£ MongoDB with Node.js**
MongoDB is a **NoSQL database** that stores data in **JSON-like format**. It is great for **flexible schema** and **scalability**.

## ðŸ”¹ **1.1 Install MongoDB & Mongoose**  
```sh
npm install mongoose
```

## ðŸ”¹ **1.2 Connect to MongoDB in `server.js`**
```js
const mongoose = require("mongoose");

mongoose.connect("mongodb://localhost:27017/mydatabase", {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const db = mongoose.connection;
db.once("open", () => console.log("âœ… Connected to MongoDB"));
db.on("error", (err) => console.error("âŒ MongoDB connection error:", err));
```

## ðŸ”¹ **1.3 Define a Schema & Model**
```js
const userSchema = new mongoose.Schema({
  name: String,
  email: String,
  age: Number,
});

const User = mongoose.model("User", userSchema);
```

## ðŸ”¹ **1.4 CRUD Operations**
âœ” **Create a User**
```js
app.post("/users", async (req, res) => {
  const newUser = new User(req.body);
  await newUser.save();
  res.status(201).json(newUser);
});
```

âœ” **Read Users**
```js
app.get("/users", async (req, res) => {
  const users = await User.find();
  res.json(users);
});
```

âœ” **Update User**
```js
app.put("/users/:id", async (req, res) => {
  const user = await User.findByIdAndUpdate(req.params.id, req.body, { new: true });
  res.json(user);
});
```

âœ” **Delete User**
```js
app.delete("/users/:id", async (req, res) => {
  await User.findByIdAndDelete(req.params.id);
  res.json({ message: "User deleted" });
});
```

ðŸ“Œ **MongoDB is best for:**  
âœ… Scalable applications  
âœ… Flexible data structures  
âœ… Real-time apps  

---

# ðŸ“Œ **2ï¸âƒ£ PostgreSQL with Node.js**  
PostgreSQL is a **relational database** known for **data integrity, transactions, and scalability**.

## ðŸ”¹ **2.1 Install PostgreSQL & pg Library**
```sh
npm install pg
```

## ðŸ”¹ **2.2 Connect to PostgreSQL**
```js
const { Pool } = require("pg");

const pool = new Pool({
  user: "postgres",
  host: "localhost",
  database: "mydatabase",
  password: "mypassword",
  port: 5432,
});

pool.connect()
  .then(() => console.log("âœ… Connected to PostgreSQL"))
  .catch(err => console.error("âŒ PostgreSQL connection error:", err));
```

## ðŸ”¹ **2.3 Creating a Users Table**
```js
const createTable = async () => {
  await pool.query(`
    CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      name VARCHAR(50),
      email VARCHAR(100) UNIQUE
    );
  `);
  console.log("âœ… Users table created!");
};
createTable();
```

## ðŸ”¹ **2.4 CRUD Operations**
âœ” **Create a User**
```js
app.post("/users", async (req, res) => {
  const { name, email } = req.body;
  const result = await pool.query("INSERT INTO users (name, email) VALUES ($1, $2) RETURNING *", [name, email]);
  res.status(201).json(result.rows[0]);
});
```

âœ” **Read Users**
```js
app.get("/users", async (req, res) => {
  const result = await pool.query("SELECT * FROM users");
  res.json(result.rows);
});
```

âœ” **Update User**
```js
app.put("/users/:id", async (req, res) => {
  const { name, email } = req.body;
  const result = await pool.query(
    "UPDATE users SET name = $1, email = $2 WHERE id = $3 RETURNING *",
    [name, email, req.params.id]
  );
  res.json(result.rows[0]);
});
```

âœ” **Delete User**
```js
app.delete("/users/:id", async (req, res) => {
  await pool.query("DELETE FROM users WHERE id = $1", [req.params.id]);
  res.json({ message: "User deleted" });
});
```

ðŸ“Œ **PostgreSQL is best for:**  
âœ… Structured & relational data  
âœ… Transactions & ACID compliance  
âœ… Complex queries with JOINs  

---

# ðŸ“Œ **3ï¸âƒ£ MySQL with Node.js**  
MySQL is a **popular relational database** known for **high performance & reliability**.

## ðŸ”¹ **3.1 Install MySQL & mysql2 Library**
```sh
npm install mysql2
```

## ðŸ”¹ **3.2 Connect to MySQL**
```js
const mysql = require("mysql2");

const connection = mysql.createConnection({
  host: "localhost",
  user: "root",
  password: "mypassword",
  database: "mydatabase",
});

connection.connect((err) => {
  if (err) {
    console.error("âŒ MySQL connection error:", err);
  } else {
    console.log("âœ… Connected to MySQL");
  }
});
```

## ðŸ”¹ **3.3 Creating a Users Table**
```js
const createTable = `
  CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50),
    email VARCHAR(100) UNIQUE
  );
`;

connection.query(createTable, (err, results) => {
  if (err) throw err;
  console.log("âœ… Users table created!");
});
```

## ðŸ”¹ **3.4 CRUD Operations**
âœ” **Create a User**
```js
app.post("/users", (req, res) => {
  const { name, email } = req.body;
  connection.query("INSERT INTO users (name, email) VALUES (?, ?)", [name, email], (err, results) => {
    if (err) return res.status(500).json(err);
    res.status(201).json({ id: results.insertId, name, email });
  });
});
```

âœ” **Read Users**
```js
app.get("/users", (req, res) => {
  connection.query("SELECT * FROM users", (err, results) => {
    if (err) return res.status(500).json(err);
    res.json(results);
  });
});
```

âœ” **Update User**
```js
app.put("/users/:id", (req, res) => {
  const { name, email } = req.body;
  connection.query(
    "UPDATE users SET name = ?, email = ? WHERE id = ?",
    [name, email, req.params.id],
    (err, results) => {
      if (err) return res.status(500).json(err);
      res.json({ message: "User updated" });
    }
  );
});
```

âœ” **Delete User**
```js
app.delete("/users/:id", (req, res) => {
  connection.query("DELETE FROM users WHERE id = ?", [req.params.id], (err, results) => {
    if (err) return res.status(500).json(err);
    res.json({ message: "User deleted" });
  });
});
```

ðŸ“Œ **MySQL is best for:**  
âœ… Fast & reliable transactions  
âœ… Structured data storage  
âœ… Scalable relational databases  

---

# ðŸŽ¯ **Summary: Choosing the Right Database**  
âœ… **MongoDB** â†’ Best for **flexible, scalable, and unstructured data**  
âœ… **PostgreSQL** â†’ Best for **data integrity, relational operations, and transactions**  
âœ… **MySQL** â†’ Best for **high-performance relational storage**  

ðŸš€ **Next Steps:**  
âœ” Learn **ORMs** like Sequelize (for SQL) & Mongoose (for MongoDB)  
âœ” Explore **Database Indexing & Optimization**  
âœ” Deploy **Database in Cloud (MongoDB Atlas, AWS RDS, Firebase, etc.)**  

ðŸ”¥ Mastering **Database Connectivity in Node.js** makes you a **full-stack developer!** ðŸš€