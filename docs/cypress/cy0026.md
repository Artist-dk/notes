# **ğŸ”¥ Data-Driven Testing in Cypress: Using `.each()` and Iterating Over Test Cases ğŸš€**  

Data-driven testing (DDT) is a powerful technique that allows running the **same test multiple times with different sets of data**. Cypress provides multiple ways to achieve this, including `.each()` and looping through test cases with fixture data.  

---

## **ğŸ“Œ 1ï¸âƒ£ What is Data-Driven Testing?**  

ğŸ”¹ Data-driven testing means **separating test logic from test data**.  
ğŸ”¹ Instead of **hardcoding** test data, we store it in **arrays, JSON files, or external sources**.  
ğŸ”¹ Cypress enables **iterating over multiple test cases** dynamically using `.each()` and looping over arrays or fixtures.  

âœ… **Advantages:**  
âœ” Reduces duplicate test code  
âœ” Makes tests more scalable and maintainable  
âœ” Allows testing multiple scenarios with minimal effort  
âœ” Can be used with JSON, CSV, API responses, or databases  

---

## **ğŸ“Œ 2ï¸âƒ£ Using `.each()` to Iterate Over Elements in Cypress**  

Cypress provides `.each()` to iterate over elements **on a webpage**, such as:  
âœ… **Lists (ul, li)**  
âœ… **Tables (rows, columns, cells)**  
âœ… **Dropdown menus**  

### **âœ… Example: Iterating Over a List of Elements**
```javascript
describe('Iterating Over List Items', () => {
  it('Checks all list items', () => {
    cy.visit('/items');

    cy.get('.item-list li').each(($el, index, $list) => {
      cy.wrap($el).should('be.visible'); // Ensures each item is visible
      cy.log(`Item ${index + 1}: ${$el.text()}`); // Logs each item's text
    });
  });
});
```
### **ğŸ” Explanation:**  
âœ” `cy.get('.item-list li')` selects all list items  
âœ” `.each(($el, index, $list) => { ... })` loops through each item  
âœ” `cy.wrap($el)` ensures Cypress commands work properly inside `.each()`  
âœ” `cy.log()` prints the item's text in Cypress Test Runner  

---

## **ğŸ“Œ 3ï¸âƒ£ Using `.each()` for Data-Driven Testing (Iterating Over Test Cases)**  

`.each()` can **loop through an array of test data** and run multiple tests dynamically.

### **âœ… Example: Testing Multiple Users in Login Flow**
```javascript
describe('Data-Driven Login Tests', () => {
  const users = [
    { username: 'user1', password: 'password123' },
    { username: 'user2', password: 'password456' },
    { username: 'admin', password: 'adminPass' }
  ];

  users.forEach((user) => {
    it(`Logs in as ${user.username}`, () => {
      cy.visit('/login');

      cy.get('#username').type(user.username);
      cy.get('#password').type(user.password);
      cy.get('#loginBtn').click();

      cy.get('.welcome-message').should('contain', `Welcome, ${user.username}`);
    });
  });
});
```
### **ğŸ” Explanation:**  
âœ” **Uses `forEach()` to loop over an array of users**  
âœ” Runs the **same test case for each user**  
âœ” Eliminates duplicate test cases  

---

## **ğŸ“Œ 4ï¸âƒ£ Using `.each()` with Fixtures for Dynamic Data**  

Instead of defining test data **inside the test file**, we can **load data from a fixture**.

### **âœ… Example: Using a JSON Fixture for Data-Driven Testing**  
#### **ğŸ“ JSON Fixture File: `users.json`**
```json
[
  { "username": "testUser", "password": "testPass" },
  { "username": "adminUser", "password": "adminPass" }
]
```
#### **âœ… Cypress Test: Iterating Over Fixture Data**
```javascript
describe('Login Test with JSON Fixture', () => {
  beforeEach(() => {
    cy.fixture('users').as('userData');
  });

  it('Logs in multiple users from fixture', function () {
    cy.get('@userData').each((user) => {
      cy.visit('/login');

      cy.get('#username').type(user.username);
      cy.get('#password').type(user.password);
      cy.get('#loginBtn').click();

      cy.get('.welcome-message').should('contain', `Welcome, ${user.username}`);

      cy.log(`âœ… Test completed for ${user.username}`);
    });
  });
});
```
### **ğŸ” Explanation:**  
âœ” **Loads test data from `users.json`** using `cy.fixture()`  
âœ” Uses `.each()` to **iterate over each user in the JSON file**  
âœ” Ensures **each userâ€™s login works as expected**  

---

## **ğŸ“Œ 5ï¸âƒ£ Using `.each()` to Validate Table Data**  

You can **loop through table rows and validate** their contents dynamically.

### **âœ… Example: Validating a Table**
```javascript
describe('Validating Table Data', () => {
  it('Checks all rows in a table', () => {
    cy.visit('/products');

    cy.get('table tbody tr').each(($row, index) => {
      cy.wrap($row).within(() => {
        cy.get('td').should('have.length', 3); // Ensures 3 columns exist
        cy.log(`âœ… Row ${index + 1} validated`);
      });
    });
  });
});
```
### **ğŸ” Explanation:**  
âœ” Uses `.each()` to **iterate over table rows (`tr`)**  
âœ” `.within(() => {...})` scopes Cypress commands to **each row**  
âœ” Ensures **each row has 3 columns**  

---

## **ğŸ“Œ 6ï¸âƒ£ Using `.each()` with API Calls**  

We can fetch API data and dynamically run test cases **based on the API response**.

### **âœ… Example: Iterating Over API Data**
```javascript
describe('API Data-Driven Testing', () => {
  it('Fetches users and tests login', () => {
    cy.request('/api/users').then((response) => {
      expect(response.status).to.eq(200);

      response.body.forEach((user) => {
        cy.visit('/login');

        cy.get('#username').type(user.username);
        cy.get('#password').type(user.password);
        cy.get('#loginBtn').click();

        cy.get('.welcome-message').should('contain', `Welcome, ${user.username}`);
      });
    });
  });
});
```
### **ğŸ” Explanation:**  
âœ” Uses `cy.request()` to **fetch user data from an API**  
âœ” Iterates over the API response and **runs login tests for each user**  
âœ” Ensures Cypress can **dynamically adapt to API data**  

---

## **ğŸ“Œ 7ï¸âƒ£ Summary: Best Practices for Data-Driven Testing in Cypress**  

âœ… **Use `.each()`** to iterate over UI elements and test data  
âœ… **Store test data in fixtures (JSON, CSV, XML) for reusability**  
âœ… **Use `forEach()` for looping over test scenarios**  
âœ… **Mock API responses using `cy.intercept()` to control test conditions**  
âœ… **Combine `.each()` with API calls (`cy.request()`) for dynamic data**  

---

## **ğŸš€ Whatâ€™s Next?**  

Would you like:  
âœ” **Examples with CSV/XML test data?**  
âœ” **Using Faker.js for random test data generation?**  
âœ” **Parameterizing tests using Cypress `cy.parameterized()`?**  

Let me know! ğŸ˜ŠğŸ”¥