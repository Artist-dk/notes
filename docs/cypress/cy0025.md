# **ğŸ”¥ Working with Fixtures & Data-Driven Testing in Cypress ğŸš€**  

Fixtures and data-driven testing are crucial for making Cypress tests **efficient, reusable, and maintainable**. They allow you to separate test data from test scripts, making it easier to manage and scale test cases.

---

## **ğŸ“Œ 1ï¸âƒ£ What Are Fixtures in Cypress?**  

Fixtures in Cypress are **external files** (usually JSON, but also .csv, .txt, or .xml) that store **static or dynamic test data**. They help:  

âœ… **Reuse data across multiple tests**  
âœ… **Separate test logic from data** for better maintainability  
âœ… **Enable data-driven testing** (running the same test with different data sets)  
âœ… **Mock API responses** by serving fixture files instead of real API calls  

### **ğŸ“‚ Cypress Fixture File Location**  
Cypress stores fixture files inside the `cypress/fixtures/` folder by default.

```
/cypress
 â”œâ”€â”€ /fixtures
 â”‚    â”œâ”€â”€ users.json
 â”‚    â”œâ”€â”€ products.json
 â”‚    â”œâ”€â”€ testData.json
```

---

## **ğŸ“Œ 2ï¸âƒ£ Creating & Using Fixtures in Cypress**  

Fixtures can be imported inside test files using the `cy.fixture()` command.

### **âœ… Example: Loading a Fixture File**
#### **ğŸ“ JSON Fixture File: `users.json`**
```json
{
  "user1": {
    "username": "testUser",
    "password": "securePass123"
  },
  "user2": {
    "username": "adminUser",
    "password": "adminPass456"
  }
}
```

#### **âœ… Cypress Test: Importing JSON Fixture**
```javascript
describe('Login Test with Fixtures', () => {
  beforeEach(() => {
    cy.fixture('users').then((users) => {
      cy.wrap(users).as('userData');  // Stores fixture data as alias
    });
  });

  it('Logs in with user1 credentials', function () {
    cy.visit('/login');

    cy.get('#username').type(this.userData.user1.username);
    cy.get('#password').type(this.userData.user1.password);
    cy.get('#loginBtn').click();

    cy.get('.welcome-message').should('contain', 'Welcome, testUser');
  });
});
```
### **ğŸ” Explanation:**  
âœ” Loads `users.json` before each test using `cy.fixture()`  
âœ” Stores the fixture data as an alias (`@userData`)  
âœ” Uses `this.userData.user1.username` to access fixture data  
âœ” Enters the credentials and verifies login success  

---

## **ğŸ“Œ 3ï¸âƒ£ Data-Driven Testing with Fixtures**  

Cypress can **iterate over multiple test cases** using `cy.fixture()` and `forEach()`. This is helpful when testing **multiple user roles, products, or form submissions**.

### **âœ… Example: Running the Same Test for Multiple Users**
```javascript
describe('Data-Driven Login Test', () => {
  beforeEach(() => {
    cy.fixture('users').as('usersData'); // Load fixture
  });

  it('Tests login for multiple users', function () {
    Object.entries(this.usersData).forEach(([key, user]) => {
      cy.visit('/login');

      cy.get('#username').type(user.username);
      cy.get('#password').type(user.password);
      cy.get('#loginBtn').click();

      cy.get('.welcome-message').should('contain', `Welcome, ${user.username}`);

      cy.log(`âœ… Test passed for ${user.username}`);
    });
  });
});
```
âœ” **Tests multiple login scenarios using fixture data.**  
âœ” **Avoids hardcoding credentials directly in the test file.**  
âœ” **Loops through all users and validates the login.**  

---

## **ğŸ“Œ 4ï¸âƒ£ Using Fixtures to Mock API Responses**  

Instead of making real API calls, Cypress can **intercept requests** and return fixture data. This makes tests **faster, stable, and independent of backend services**.

### **âœ… Example: Mocking an API Response**
#### **ğŸ“ JSON Fixture File: `products.json`**
```json
{
  "products": [
    { "id": 1, "name": "Laptop", "price": 1200 },
    { "id": 2, "name": "Phone", "price": 800 }
  ]
}
```

#### **âœ… Cypress Test: Using Fixtures in API Testing**
```javascript
describe('Mock API with Fixtures', () => {
  beforeEach(() => {
    cy.fixture('products').as('productData');
  });

  it('Intercepts API call and returns fixture data', function () {
    cy.intercept('GET', '/api/products', { fixture: 'products.json' }).as('getProducts');

    cy.visit('/shop');
    cy.wait('@getProducts');

    cy.get('.product-name').should('contain', 'Laptop');
    cy.get('.product-price').should('contain', '$1200');
  });
});
```
### **ğŸ” Explanation:**  
âœ” Uses `cy.intercept()` to return fixture data when `/api/products` is called  
âœ” Ensures the UI correctly displays mocked data  

---

## **ğŸ“Œ 5ï¸âƒ£ Using Dynamic Data in Fixtures**  

Sometimes, static JSON files are **not enough**. Cypress allows **modifying fixture data dynamically**.

### **âœ… Example: Generating Dynamic Test Data**
```javascript
describe('Dynamic Fixture Data', () => {
  beforeEach(() => {
    cy.fixture('users').then((users) => {
      users.user1.username = `testUser${Date.now()}`; // Add timestamp for uniqueness
      cy.wrap(users).as('updatedUserData');
    });
  });

  it('Logs in with dynamically generated username', function () {
    cy.visit('/login');

    cy.get('#username').type(this.updatedUserData.user1.username);
    cy.get('#password').type(this.updatedUserData.user1.password);
    cy.get('#loginBtn').click();

    cy.get('.welcome-message').should('contain', 'Welcome');
  });
});
```
âœ” **Dynamically modifies test data at runtime**  
âœ” **Useful for testing unique user registrations**  

---

## **ğŸ“Œ 6ï¸âƒ£ Using Fixtures with Environment Variables (`Cypress.env`)**  

You can store sensitive data like API keys or credentials in Cypress **environment variables** instead of JSON fixtures.

### **âœ… Example: Using Environment Variables in Tests**
#### **ğŸ“‚ cypress.config.js**
```javascript
const { defineConfig } = require("cypress");

module.exports = defineConfig({
  env: {
    adminUsername: "admin",
    adminPassword: "admin123"
  }
});
```

#### **âœ… Cypress Test: Accessing `Cypress.env()`**
```javascript
describe('Login Using Env Variables', () => {
  it('Logs in using Cypress.env()', () => {
    cy.visit('/login');

    cy.get('#username').type(Cypress.env('adminUsername'));
    cy.get('#password').type(Cypress.env('adminPassword'));
    cy.get('#loginBtn').click();

    cy.get('.welcome-message').should('contain', 'Welcome, admin');
  });
});
```
âœ” **Keeps sensitive data out of fixture files**  
âœ” **Best for API keys, credentials, and secrets**  

---

## **ğŸ“Œ 7ï¸âƒ£ Summary: Best Practices for Fixtures & Data-Driven Testing**  

âœ… **Store reusable test data** in Cypress `fixtures/` folder  
âœ… **Use `cy.fixture()`** to load test data dynamically  
âœ… **Leverage data-driven testing** to iterate over multiple test cases  
âœ… **Mock API responses using `cy.intercept()`** for stable tests  
âœ… **Use `Cypress.env()` for sensitive credentials** instead of storing in fixtures  
âœ… **Modify fixture data dynamically** for dynamic test scenarios  

---

## **ğŸš€ Whatâ€™s Next?**  

Would you like examples for:  
âœ” **Using CSV/XML data as fixtures?**  
âœ” **Generating random test data (Faker.js integration)?**  
âœ” **Using Cypress Fixtures with REST APIs?**  

Let me know! ğŸ˜ŠğŸ”¥